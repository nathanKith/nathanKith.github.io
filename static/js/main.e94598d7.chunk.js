(this.webpackJsonpkinopoisk=this.webpackJsonpkinopoisk||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(0),a=n.n(c),i=n(27),r=n.n(i),o=n(33),l=(n(39),n(40),n(2)),d="/",j={url:"/film/:id",create:function(e){return"/film/".concat(e)}},u=function(){var e=Object(l.f)();return Object(s.jsx)("div",{className:"header",children:Object(s.jsxs)("div",{className:"header-inner",children:[Object(s.jsx)("div",{className:"header-inner__logo-box",children:Object(s.jsx)("a",{href:"#",className:"header-inner__logo",onClick:function(t){t.preventDefault(),e.push(d)},children:"filmterest"})}),Object(s.jsx)("form",{className:"header-inner__search",children:Object(s.jsxs)("div",{className:"header-inner__search-box",children:[Object(s.jsx)("button",{className:"header-inner__button",type:"submit",children:Object(s.jsx)("img",{src:"search.svg",className:"header-inner__button-img",alt:""})}),Object(s.jsx)("input",{className:"header-inner__input",type:"text",id:"search"})]})})]})})},p=n(32),m=n(8),f=(n(49),n(50),function(e){var t=e.onClick,n=e.src;return Object(s.jsx)("div",{className:"film-box",onClick:t,children:Object(s.jsx)("img",{src:n,className:"film-box__img",alt:""})})}),h=n(18),b=n.n(h),O=n(29),x=n(30),_=n.n(x),v=function(){var e=Object(O.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=n(31),N=n.n(g),k=function(){var e=c.useState({films:[{posterUrl:"",filmId:0}],pageCount:1}),t=Object(m.a)(e,2),n=t[0],a=t[1],i=Object(l.f)(),r=c.useState(1),o=Object(m.a)(r,2),d=o[0],u=o[1],h=c.useState(!1),b=Object(m.a)(h,2),O=b[0],x=b[1];return c.useEffect((function(){O||(x(!0),v("https://kinopoiskapiunofficial.tech/api/v2.1/films/top",{params:{page:d,type:"TOP_250_BEST_FILMS"},headers:{"X-API-KEY":"ab632fee-9bd3-4904-8fdf-4589e142f107"}}).then((function(e){a((function(t){var n;return(n=t.films).push.apply(n,Object(p.a)(e.data.films)),t})),1===d&&a((function(e){return e.films=e.films.slice(1),e})),x(!1)})).catch((function(e){console.log(e)})))}),[d]),Object(s.jsx)(N.a,{hasMore:!0,isLoading:O,onReachBottom:function(){u((function(e){return e+1}))},className:"films-outer",children:n.films.map((function(e){return Object(s.jsx)(f,{onClick:function(t){i.push(j.create(e.filmId))},src:e.posterUrl},e.filmId)}))})},y=(n(70),function(e){var t=e.split(":"),n=Object(m.a)(t,2),s=n[0],c=n[1];return"".concat(s,"h ").concat(c,"m")}),S=function(e){var t=Object(l.g)().id,n=a.a.useState({data:{nameRu:"",posterUrl:"",year:"",filmLength:"",slogan:"",description:"",premiereWorld:"",countries:[{country:""}],genres:[{genre:""}]},rating:{rating:0},images:{backdrops:[{url:""}]}}),c=Object(m.a)(n,2),i=c[0],r=c[1];return a.a.useEffect((function(){v("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(t),{params:{append_to_response:"RATING,POSTERS"},headers:{"X-API-KEY":"ab632fee-9bd3-4904-8fdf-4589e142f107"}}).then((function(e){var t=e.data;r((function(e){return t})),document.documentElement.style.setProperty("--url","url(".concat(i.images.backdrops[0].url,")"))})).catch((function(e){console.log("Something bad happen while ajax")}))}),[i.images.backdrops,t]),Object(s.jsx)("div",{className:"film-card-outer",children:Object(s.jsxs)("div",{className:"film-card",children:[Object(s.jsx)("div",{className:"poster",children:Object(s.jsx)("img",{className:"poster__img",src:i.data.posterUrl,alt:""})}),Object(s.jsxs)("div",{className:"description",children:[Object(s.jsxs)("div",{className:"description__base",children:[Object(s.jsx)("div",{className:"description__title",children:Object(s.jsxs)("span",{children:[i.data.nameRu," ",Object(s.jsxs)("span",{className:"description__year",children:["(",i.data.year,")"]})]})}),Object(s.jsxs)("div",{className:"description__facts",children:[Object(s.jsxs)("span",{className:"description__date",children:[i.data.premiereWorld.split("-").slice().reverse().join("/")," (",i.data.countries[0].country,")"]}),Object(s.jsx)("span",{className:"description__genres",children:i.data.genres.map((function(e){return e.genre})).join(", ")}),Object(s.jsx)("span",{className:"description__duration",children:y(i.data.filmLength)})]})]}),Object(s.jsxs)("div",{className:"description__rating",children:[Object(s.jsx)("span",{children:"\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u043e\u0446\u0435\u043d\u043a\u0430: "}),Object(s.jsx)("span",{className:"description__rate",children:i.rating.rating})]}),Object(s.jsx)("div",{className:"description__quote",children:Object(s.jsx)("span",{children:i.data.slogan})}),Object(s.jsxs)("div",{className:"description__overview",children:[Object(s.jsx)("span",{className:"description__overview-header",children:"\u041e\u0431\u0437\u043e\u0440"}),Object(s.jsx)("span",{className:"description__overview-content",children:i.data.description})]})]})]})})},w=n(10);var E=function(){return Object(s.jsx)(w.a,{children:Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)(u,{}),Object(s.jsxs)(l.c,{children:[Object(s.jsx)(l.a,{path:j.url,render:function(e){return Object(s.jsx)(S,Object(o.a)({},e))}}),Object(s.jsx)(l.a,{path:d,children:Object(s.jsx)(k,{})})]})]})})};r.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(E,{})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.e94598d7.chunk.js.map