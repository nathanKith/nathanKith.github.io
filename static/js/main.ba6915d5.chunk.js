(this.webpackJsonpkinopoisk=this.webpackJsonpkinopoisk||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n(0),a=n.n(s),i=n(28),r=n.n(i),o=n(14),l=(n(39),n(40),n(2)),d="/",j={url:"/film/:id",create:function(e){return"/film/".concat(e)}},u=function(){var e=Object(l.f)();return Object(c.jsx)("div",{className:"header",children:Object(c.jsxs)("div",{className:"header-inner",children:[Object(c.jsx)("div",{className:"header-inner__logo-box",children:Object(c.jsx)("a",{href:"#",className:"header-inner__logo",onClick:function(t){t.preventDefault(),e.push(d)},children:"filmterest"})}),Object(c.jsx)("form",{className:"header-inner__search",children:Object(c.jsxs)("div",{className:"header-inner__search-box",children:[Object(c.jsx)("button",{className:"header-inner__button",type:"submit",children:Object(c.jsx)("img",{src:"search.svg",className:"header-inner__button-img",alt:""})}),Object(c.jsx)("input",{className:"header-inner__input",type:"text",id:"search"})]})})]})})},p=n(33),f=n(8),h=(n(49),n(50),function(e){var t=e.onClick,n=e.src;return Object(c.jsx)("div",{className:"film-box",onClick:t,children:Object(c.jsx)("img",{src:n,className:"film-box__img",alt:""})})}),b=n(19),m=n.n(b),O=n(30),x=n(31),_=n.n(x),v=function(){var e=Object(O.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=n(32),N=n.n(g),k=function(){var e=s.useState({films:[{posterUrl:"",filmId:0}],pageCount:1}),t=Object(f.a)(e,2),n=t[0],a=t[1],i=Object(l.f)(),r=s.useState(1),o=Object(f.a)(r,2),d=o[0],u=o[1],b=s.useState(!1),m=Object(f.a)(b,2),O=m[0],x=m[1];return s.useEffect((function(){O||(x(!0),v("https://kinopoiskapiunofficial.tech/api/v2.1/films/top",{params:{page:d,type:"TOP_250_BEST_FILMS"},headers:{"X-API-KEY":"ab632fee-9bd3-4904-8fdf-4589e142f107"}}).then((function(e){a((function(t){var n;return(n=t.films).push.apply(n,Object(p.a)(e.data.films)),t})),1===d&&a((function(e){return e.films=e.films.slice(1),e})),x(!1)})).catch((function(e){console.log(e)})))}),[d]),Object(c.jsx)(N.a,{hasMore:!0,isLoading:O,onReachBottom:function(){u((function(e){return e+1}))},className:"films-outer",children:n.films.map((function(e){return Object(c.jsx)(h,{onClick:function(t){i.push(j.create(e.filmId))},src:e.posterUrl},e.filmId)}))})},y=(n(70),function(e){var t=e.split(":"),n=Object(f.a)(t,2),c=n[0],s=n[1];return"".concat(c,"h ").concat(s,"m")}),S=function(e){var t=Object(l.g)().id,n=a.a.useState({data:{nameRu:"",posterUrl:"",year:"",filmLength:"",slogan:"",description:"",premiereWorld:"",countries:[{country:""}],genres:[{genre:""}]},rating:{rating:0},images:{backdrops:[{url:""}]}}),s=Object(f.a)(n,2),i=s[0],r=s[1],d=a.a.useState({"--url":""}),j=Object(f.a)(d,2),u=j[0],p=j[1];return a.a.useEffect((function(){v("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(t),{params:{append_to_response:"POSTERS,RATING"},headers:{"X-API-KEY":"ab632fee-9bd3-4904-8fdf-4589e142f107"}}).then((function(e){var t=e.data;r(t),console.log(t),p((function(e){return e["--url"]="url(".concat(i.images.backdrops[0].url,")"),e})),console.log(u)})).catch((function(e){console.log("Something bad happen while ajax")}))}),[]),Object(c.jsx)("div",{className:"film-card-outer",style:Object(o.a)({},u),children:Object(c.jsxs)("div",{className:"film-card",children:[Object(c.jsx)("div",{className:"poster",children:Object(c.jsx)("img",{className:"poster__img",src:i.data.posterUrl,alt:""})}),Object(c.jsxs)("div",{className:"description",children:[Object(c.jsxs)("div",{className:"description__base",children:[Object(c.jsx)("div",{className:"description__title",children:Object(c.jsxs)("span",{children:[i.data.nameRu," ",Object(c.jsxs)("span",{className:"description__year",children:["(",i.data.year,")"]})]})}),Object(c.jsxs)("div",{className:"description__facts",children:[Object(c.jsxs)("span",{className:"description__date",children:[i.data.premiereWorld.split("-").slice().reverse().join("/")," (",i.data.countries[0].country,")"]}),Object(c.jsx)("span",{className:"description__genres",children:i.data.genres.map((function(e){return e.genre})).join(", ")}),Object(c.jsx)("span",{className:"description__duration",children:y(i.data.filmLength)})]})]}),Object(c.jsxs)("div",{className:"description__rating",children:[Object(c.jsx)("span",{children:"\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u043e\u0446\u0435\u043d\u043a\u0430: "}),Object(c.jsx)("span",{className:"description__rate",children:i.rating.rating})]}),Object(c.jsx)("div",{className:"description__quote",children:Object(c.jsx)("span",{children:i.data.slogan})}),Object(c.jsxs)("div",{className:"description__overview",children:[Object(c.jsx)("span",{className:"description__overview-header",children:"\u041e\u0431\u0437\u043e\u0440"}),Object(c.jsx)("span",{className:"description__overview-content",children:i.data.description})]})]})]})})},w=n(10);var I=function(){return Object(c.jsx)(w.a,{children:Object(c.jsxs)("div",{className:"app",children:[Object(c.jsx)(u,{}),Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{path:j.url,render:function(e){return Object(c.jsx)(S,Object(o.a)({},e))}}),Object(c.jsx)(l.a,{path:d,children:Object(c.jsx)(k,{})})]})]})})};r.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(I,{})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.ba6915d5.chunk.js.map