{"version":3,"sources":["config/routes.ts","components/Header/Header.tsx","components/Films/FilmBox/FilmBox.tsx","utils/ajax.ts","components/Films/Films.tsx","utils/formatTime.ts","components/FilmCard/FilmCard.tsx","App/App.tsx","index.tsx"],"names":["urls","url","create","id","Header","history","useHistory","className","href","onClick","evt","preventDefault","push","type","src","alt","FilmBox","ajax","params","a","axios","get","Films","React","films","posterUrl","filmId","pageCount","dataFilms","setDataFilms","page","setPage","isLoading","setIsLoading","headers","then","response","data","slice","catch","err","console","log","hasMore","onReachBottom","p","map","item","formatTime","time","split","h","m","FilmCard","props","useParams","useState","nameRu","year","filmLength","slogan","description","premiereWorld","countries","country","genres","genre","rating","images","backdrops","content","setContent","setUrl","useEffect","append_to_response","style","reverse","join","g","App","path","render","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ba6915d5.chunk.js","sourcesContent":["export const urls = {\n    FilmsFeed: '/',\n    FilmCard: {\n        url: '/film/:id',\n        create: (id: number) => `/film/${id}`,\n    }\n};\n","import './Header.scss';\nimport {useHistory} from \"react-router-dom\";\nimport {urls} from \"@config/routes\";\n\nexport const Header = () => {\n    const history = useHistory();\n\n    const handleBrand = (evt: any) => {\n        evt.preventDefault();\n\n        history.push(urls.FilmsFeed)\n    }\n\n    return (\n        <div className=\"header\">\n            <div className=\"header-inner\">\n                <div className=\"header-inner__logo-box\">\n                    <a href=\"#\" className=\"header-inner__logo\" onClick={handleBrand}>filmterest</a>\n                </div>\n                <form className=\"header-inner__search\">\n                    <div className=\"header-inner__search-box\">\n                        <button className=\"header-inner__button\" type=\"submit\">\n                            <img src=\"search.svg\" className=\"header-inner__button-img\" alt=\"\"/>\n                        </button>\n                        <input className=\"header-inner__input\" type=\"text\" id=\"search\"/>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n","import './FilmBox.scss';\n\ntype Props = {\n    src: string,\n    onClick: (evt: any) => void,\n};\n\nexport const FilmBox = ({onClick, src}: Props) => {\n    return (\n        <div className=\"film-box\" onClick={onClick}>\n            <img src={src} className=\"film-box__img\" alt=\"\"/>\n        </div>\n    );\n};\n","import axios from 'axios';\n\ntype Params = {\n    params: {\n        type?: string,\n        page?: number,\n        append_to_response?: string,\n    },\n    headers: {\n        'X-API-KEY': string,\n    }\n};\n\nexport const ajax = async (url: string, params: Params) => {\n    return await axios.get(url, params);\n};\n","import * as React from 'react';\nimport './Films.scss';\nimport {FilmBox} from './FilmBox';\nimport {ajax} from '@utils/ajax';\nimport EndlessScroll from 'react-endless-scroll';\nimport {useHistory} from 'react-router-dom';\nimport {urls} from \"@config/routes\";\n\nexport const Films = () => {\n    const [dataFilms, setDataFilms] = React.useState({\n        films: [{posterUrl: '', filmId: 0},],\n        pageCount: 1,\n    });\n\n    const history = useHistory();\n\n    const [page, setPage] = React.useState(1);\n\n    const [isLoading, setIsLoading] = React.useState(false);\n\n    const handleScroll = () => {\n        setPage((p) => p + 1);\n    };\n\n    React.useEffect(() => {\n        if (isLoading) {\n            return;\n        }\n\n        setIsLoading(true);\n        ajax('https://kinopoiskapiunofficial.tech/api/v2.1/films/top', {\n            params: {\n                page: page,\n                type: 'TOP_250_BEST_FILMS',\n            },\n            headers: {\n                'X-API-KEY': 'ab632fee-9bd3-4904-8fdf-4589e142f107',\n            }\n        })\n            .then((response) => {\n                setDataFilms((data) => {\n                    data.films.push(...response.data.films);\n                    return data;\n                })\n                if (page === 1) {\n                    setDataFilms((data) => {\n                        data.films = data.films.slice(1);\n                        return data;\n                    });\n                }\n                setIsLoading(false);\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }, [page]);\n\n    return (\n        <EndlessScroll hasMore={true} isLoading={isLoading} onReachBottom={handleScroll} className=\"films-outer\">\n            {dataFilms.films.map((item) => <FilmBox onClick={(evt: any) => {history.push(urls.FilmCard.create(item.filmId))}} src={item.posterUrl} key={item.filmId}/>)}\n        </EndlessScroll>\n    );\n};\n","export const formatTime = (time: string) : string => {\n    const [h, m] = time.split(':');\n    return `${h}h ${m}m`\n};\n","import './FilmCard.scss';\nimport React from 'react';\nimport { formatTime } from '@utils/formatTime';\nimport { useParams } from 'react-router-dom';\nimport { ajax } from \"@utils/ajax\";\n\nexport const FilmCard = (props: any) => {\n    const {id} = useParams() as {id: string};\n\n    const [content, setContent] = React.useState({\n        data: {\n            nameRu: '',\n            posterUrl: '',\n            year: '',\n            filmLength: '',\n            slogan: '',\n            description: '',\n            premiereWorld: '',\n            countries: [\n                {\n                    country: '',\n                }\n            ],\n            genres: [\n                {\n                    genre: '',\n                }\n            ]\n        },\n        rating: {\n            rating: 0.0,\n        },\n        images: {\n            backdrops: [\n                {\n                    url: '',\n                }\n            ]\n        }\n    });\n\n    const [url, setUrl] = React.useState({\n        \"--url\": \"\",\n    });\n\n    React.useEffect(() => {\n        ajax(`https://kinopoiskapiunofficial.tech/api/v2.1/films/${id}`, {\n            params: {\n                append_to_response: 'POSTERS,RATING',\n            },\n            headers: {\n                'X-API-KEY': 'ab632fee-9bd3-4904-8fdf-4589e142f107',\n            }\n        })\n            .then(({data}) => {\n                setContent(data);\n                console.log(data);\n                setUrl((url) => {\n                    url[\"--url\"] = `url(${content.images.backdrops[0].url})`;\n                    return url;\n                });\n\n                console.log(url);\n                // document.documentElement.style.setProperty('--url', `url(${content.images.backdrops[0].url})`);\n            })\n            .catch((err) => {\n                console.log('Something bad happen while ajax');\n            });\n    }, []);\n\n    return (\n        // @ts-ignore\n        <div className=\"film-card-outer\" style={{...url}}>\n            <div className=\"film-card\">\n                <div className=\"poster\">\n                    <img className=\"poster__img\" src={content.data.posterUrl} alt=\"\"/>\n                </div>\n                <div className=\"description\">\n                    <div className=\"description__base\">\n                        <div className=\"description__title\">\n                            <span>{content.data.nameRu} <span className=\"description__year\">({content.data.year})</span></span>\n                        </div>\n                        <div className=\"description__facts\">\n                            <span className=\"description__date\">{content.data.premiereWorld.split('-').slice().reverse().join('/')} ({content.data.countries[0].country})</span>\n                            <span className=\"description__genres\">{content.data.genres.map((g) => g.genre).join(', ')}</span>\n                            <span className=\"description__duration\">{formatTime(content.data.filmLength)}</span>\n                        </div>\n                    </div>\n                    <div className=\"description__rating\">\n                        <span>Средняя оценка: </span>\n                        <span className=\"description__rate\">{content.rating.rating}</span>\n                    </div>\n                    <div className=\"description__quote\">\n                        <span>{content.data.slogan}</span>\n                    </div>\n                    <div className=\"description__overview\">\n                        <span className=\"description__overview-header\">Обзор</span>\n                        <span className=\"description__overview-content\">{content.data.description}</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};","import React from 'react';\nimport './App.scss';\nimport {Header} from '../components/Header';\nimport {Films} from '../components/Films';\nimport {FilmCard} from \"@components/FilmCard\";\nimport {BrowserRouter, Switch, Route} from \"react-router-dom\";\nimport {urls} from '@config/routes';\n\nfunction App() {\n    return (\n        <BrowserRouter>\n            <div className=\"app\">\n                <Header/>\n                <Switch>\n                    <Route\n                        path={urls.FilmCard.url}\n                        render={(props) => <FilmCard {...props}/>}\n                    />\n                    <Route path={urls.FilmsFeed}>\n                        <Films/>\n                    </Route>\n                </Switch>\n            </div>\n        </BrowserRouter>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}